<!-- BEGIN: content -->
<div class="survey">
<!-- BEGIN: form -->
<style type="text/css">
@import url(/share/themes/jquery-ui/onxshop/jquery-ui.css);
</style>
<script type="text/javascript" src="/share/js/jquery/ui/jquery-ui.all.min.js"></script>
<script type="text/javascript">
$(function() {
	$("#survey_form_{GET.node_id}").validate();

	/*birthday UI date picker*/
	var current_year = new Date().getFullYear();
	var last_year = current_year - 1;
	$('#client_customer_birthday_id').datepicker({firstDay: 1, dateFormat: 'dd/mm/yy', changeMonth: true, changeYear: true, yearRange: '1900:' + last_year, maxDate: last_year});
	
	/*birthday validation*/
	$.validator.addMethod("dateFormat", function(value, element) {
		return /^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(value);
	}, "Please enter a date in the format dd/mm/yyyy.");

});
</script>

<style type="text/css">
label.error { display: none; }	
</style>

<form method="post" action="{URI|htmlspecialchars}#node_id_{GET.node_id}" id="survey_form_{GET.node_id}" enctype="multipart/form-data">
	<fieldset class="single">
		<legend>{SURVEY.title|htmlspecialchars}</legend>
		<!-- BEGIN: question -->
		<div class="row">
			<span class="label"><label for="question_id_{QUESTION.id}">{QUESTION.title|htmlspecialchars}</label></span>
			<!-- BEGIN: description -->
			<div class="description">
				{QUESTION.description|htmlspecialchars}
			</div>
			<!-- END: description -->
			<!-- BEGIN: content -->
			<div class="content">
				{QUESTION.content}
			</div>
			<!-- END: content -->
			<span class="field">
				<!-- BEGIN: answer_text -->
				<textarea class="{CLASS_REQUIRED}" name="answer[{QUESTION.id}]">{SELECTED_VALUE}</textarea>
				<!-- END: answer_text -->
				<!-- BEGIN: answer_list_radio -->
					<!-- BEGIN: item -->
					<div class="row"><input type="radio" class="radio {CLASS_REQUIRED}" name="answer[{QUESTION.id}]" value="{ANSWER.id}" {SELECTED} id="answer_id_{ANSWER.id}"> <label for="answer_id_{ANSWER.id}" class="radio">{ANSWER.title|htmlspecialchars}</label></div>
					<!-- END: item -->
					<label for="answer[{QUESTION.id}]" class="error">This field is required.</label>
				<!-- END: answer_list_radio -->
				<!-- BEGIN: answer_list_select -->
				<select class="{CLASS_REQUIRED}" name="answer[{QUESTION.id}]" id="question_id_{QUESTION.id}">
					<option value="">-</option>
					<!-- BEGIN: item -->
					<option value="{ANSWER.id}" {SELECTED}>{ANSWER.title|htmlspecialchars}</option>
					<!-- END: item -->
				</select>
				<!-- END: answer_list_select -->
				<!-- BEGIN: answer_file -->
					<input type="file" name="answer[{QUESTION.id}]" class="file {CLASS_REQUIRED}" />
				<!-- END: answer_file -->
				<!-- BEGIN: answer_range -->
				<div class="survey_rangle_slider">
					<input id="answer_range_{QUESTION.id}" type="number" class="short {CLASS_REQUIRED}" name="answer[{QUESTION.id}]" min="{QUESTION.other_data.min}" max="{QUESTION.other_data.max}" step="{QUESTION.other_data.step}" value="{SELECTED_VALUE}"/>
					<script type="text/javascript">
						$(function() { 
							var input = $('#answer_range_{QUESTION.id}');
							var slider = $('<div id="answer_range_slider_{QUESTION.id}"></div>').insertAfter(input).slider({
								min: input.attr('min') * 1,
								max: input.attr('max') * 1,
								step: input.attr('step') * 1,
								range: "min",
								value: input.val(),
								slide: function(event, ui) {
									input.val(ui.value);
								}
							});
							input.change(function() {
								slider.slider("value", input.val());
							});
						});
					</script>
				</div>
				<!-- END: answer_range -->
			</span>
		</div>
		<!-- END: question -->
	</fieldset>
	
	<!-- BEGIN: require_user_details -->

	<fieldset class="single">
	
		<legend>{I18N_R_PERSONAL_DETAILS}</legend>
		
		<div class="row first_name">
			<span class="label"><label for="client_customer_first_name_id">{I18N_R_FIRST_NAME}</label></span>
			<span class="field"><input class="required text" type="text" id="client_customer_first_name_id" name="client[customer][first_name]" value="{CLIENT.customer.first_name|htmlspecialchars}"/></span>
 		</div>
 		
		<div class="row last_name">
			<span class="label"><label for="client_customer_last_name_id">{I18N_R_LAST_NAME}</label></span>
			<span class="field"><input class="required text" type="text" id="client_customer_last_name_id" name="client[customer][last_name]" value="{CLIENT.customer.last_name|htmlspecialchars}"/></span>
		</div>

		<div class="row email">
			<span class="label"><label for="client_customer_email_id">{I18N_R_EMAIL}</label></span>
			<span class="field"><input class="required email" type="email" id="client_customer_email_id" name="client[customer][email]" value="{CLIENT.customer.email|htmlspecialchars}"/></span>
		</div>

		<div class="row telephone">
			<span class="label"><label for="client_customer_telephone_id">{I18N_R_TELEPHONE}</label></span>
			<span class="field"><input class="required text" type="tel" id="client_customer_telephone_id" name="client[customer][telephone]" value="{CLIENT.customer.telephone|htmlspecialchars}"/></span>
		</div>

		<div class="row birthday">
			<span class="label"><label for="client_customer_birthday_id">Date of Birth</label></span>
			<span class="field"><input class="required text dateFormat" type="text" id="client_customer_birthday_id" name="client[customer][birthday]" value="{CLIENT.customer.birthday|htmlspecialchars}"/></span>
		</div>

		<!-- BEGIN: store -->
		<div class="row county">
			<span class="label"><label for="client_customer_store_id">Store</label></span>
			<span class="field">
				<!-- BEGIN: county_dropdown -->
				<select id="client_customer_store_id" name="client[customer][store_id]" class="required" style="width: 100%; font-size: 18px;">
					<option value="">- please select your nearest store -</option>
					<!-- BEGIN: province -->
					<optgroup label="{PROVINCE_NAME}">
						<!-- BEGIN: store -->
						<option value="{STORE.id}" {STORE.selected}>{COUNTY.label.title|htmlspecialchars} - {STORE.title|htmlspecialchars}</option>
						<!-- END: store -->
					</optgroup>
					<!-- END: province -->
				</select>
				<!-- END: county_dropdown -->
			</span>
		</div>
		<!-- END: store -->
		
		<!-- BEGIN: location -->
		<div class="row county">
			<span class="label"><label for="client_customer_county_id">County</label></span>
			<span class="field">
			
				<!-- BEGIN: county_dropdown -->
				<select id="client_customer_county_id" name="client[customer][other_data][county]" style="width: 100%; font-size: 18px;">
					<!-- BEGIN: province -->
					<optgroup label="{PROVINCE_NAME}">
						<!-- BEGIN: county -->
						<option value="{COUNTY.id}" {COUNTY.selected}>{COUNTY.label.title|htmlspecialchars}</option>
						<!-- END: county -->
					</optgroup>
					<!-- END: province -->
				</select>
				<!-- END: county_dropdown -->
			</span>
		</div>
		<div class="row city">
			<span class="label"><label for="client_customer_city_id">City / Town</label></span>
			<span class="field"><input class="text" type="text" id="client_customer_city_id" name="client[customer][other_data][city]" value="{CLIENT.customer.city|htmlspecialchars}"/></span>
		</div>
		<!-- END: location -->

		<div class="row checkbox newsletter">
			<span class="label"><input type="checkbox" class="checkbox" id="client_customer_newsletter_id" name="client[customer][newsletter]" value="1" {CLIENT.customer.newsletter} /> <label for="client_customer_newsletter_id">{I18N_R_NEWSLETTER}</label></span>
		</div>
		
	</fieldset>

	<!-- END: require_user_details -->
	
	<!-- BEGIN: require_t_and_c -->
	<div class="row agreed_with_latest_t_and_c">
		<span class="label">
			<input class="checkbox required" type="checkbox" id="client_customer_agreed_with_latest_t_and_c_id" name="client[customer][agreed_with_latest_t_and_c]" value="1"/> <label for="client_customer_agreed_with_latest_t_and_c_id">I have read and agreed to the <a href="/page/26" target="_blank">Terms &amp; Conditions</a></label>
		</span>
	</div>
	<!-- END: require_t_and_c -->
	
	<!-- BEGIN: invisible_captcha_field -->
	<div class="row captcha {ERROR.captcha}">
		<span class="label"><label for="captcha_input_{GET.node_id}">{I18N_CAPTCHA} <em id="code-captcha_{GET.node_id}">###</em>:</label></span>
		<span class="field"><input type="text" class="text" id="captcha_input_{GET.node_id}" name="captcha" value="" maxlength="45" /></span>
	</div>
	<script type="text/javascript">
		$.get("/request/component/captcha_js?node_id={GET.node_id}&nocache=1", function(data) {
			var input = $("#captcha_input_{GET.node_id}");
			var input = $("#captcha_input_{GET.node_id}");
			$("#code-captcha_{GET.node_id}").html(data);
			input.val(data).parent().parent().hide();
		});
	</script>
	<!-- END: invisible_captcha_field -->
	
	<button type="submit" name="save" value="save"><span>{I18N_SUBMIT}</span></button>
</form>
<!-- END: form -->

<!-- BEGIN: result -->
<div class="thank_you">
	<p>Thank you for your entry!</p>
	{SURVEY_RESULT}
	{ONXSHOP_REQUEST_pile #component/client/facebook_pile_survey~survey_id=GET.survey_id~}
</div>
<!-- END: result -->
<div class="bottom"></div>
</div>
<!-- END: content -->